{{> header title="Your Order Has Shipped!" }}

<mj-raw>
    <style type="text/css">
    .callout {
        background-color: #8a6d4a;
        padding: 15px 0;
    }
    .callout-large > div {
        text-align: center !important;
        color: #fff !important;
        font-size: 16px !important;
        font-weight: bold;
        padding: 0;
        font-family: 'Inter', sans-serif !important;
    }
    .callout-small > div {
        text-align: center !important;
        color: #fff !important;
        font-size: 14px !important;
        padding: 0;
        font-family: 'Inter', sans-serif !important;
    }
    .tracking-card {
        background: white;
        padding: 15px;
        border-radius: 6px;
        margin-bottom: 10px;
        border-left: 4px solid #8a6d4a;
    }
    .address-card {
        background: #f9f9f9;
        padding: 15px;
        border-radius: 6px;
        display: inline-block;
        text-align: left;
    }
    </style>
</mj-raw>

<mj-section background-color="#fafafa">
    <mj-column>
        <mj-text color="#333333" font-family="Inter, sans-serif" font-size="16px" line-height="1.6" align="center">
            Great news, {{ customer.firstName }}! Your order has been fulfilled and is on its way.
        </mj-text>
    </mj-column>
</mj-section>

<mj-section css-class="callout">
    <mj-column>
        <mj-text css-class="callout-large"><strong>Order Number</strong></mj-text>
        <mj-text css-class="callout-small">{{ order.code }}</mj-text>
    </mj-column>
    {{#if hasTracking}}
    <mj-column>
        <mj-text css-class="callout-large"><strong>Primary Tracking</strong></mj-text>
        <mj-text css-class="callout-small">{{ primaryTracking }}</mj-text>
    </mj-column>
    {{/if}}
    <mj-column>
        <mj-text css-class="callout-large"><strong>Fulfilled Date</strong></mj-text>
        <mj-text css-class="callout-small">{{ formatDate order.updatedAt }}</mj-text>
    </mj-column>
</mj-section>

{{#if hasTracking}}
<mj-section background-color="#f5f5f5" padding="30px 20px">
    <mj-column>
        <mj-text color="#333333" font-family="Inter, sans-serif" font-size="16px" line-height="1.6" align="center">
            <h3 style="font-family: 'Playfair Display', serif; color: #000000; font-size: 20px; font-weight: 700; margin: 0 0 15px 0;">Tracking Information</h3>
        </mj-text>
        
        {{#each fulfillments}}
        <mj-text color="#333333" font-family="Inter, sans-serif" font-size="14px" line-height="1.6" padding="10px 0">
            <div class="tracking-card">
                <strong>Tracking Code:</strong> {{ trackingCode }}<br>
                {{#if method}}<strong>Shipping Method:</strong> {{ method }}<br>{{/if}}
                {{#if state}}<strong>Status:</strong> {{ state }}<br>{{/if}}
                <strong>Shipped:</strong> {{ formatDate createdAt }}
            </div>
        </mj-text>
        {{/each}}
    </mj-column>
</mj-section>
{{/if}}

<mj-section background-color="#ffffff" padding="30px 20px">
    <mj-column>
        <mj-text color="#333333" font-family="Inter, sans-serif" font-size="16px" line-height="1.6" align="center">
            {{#with order.shippingAddress }}
                <h3 style="font-family: 'Playfair Display', serif; color: #000000; font-size: 20px; font-weight: 700; margin: 0 0 15px 0;">Shipping To:</h3>
                <div class="address-card">
                    <strong>{{ fullName }}</strong><br>
                    {{#if company}}{{ company }}<br>{{/if}}
                    {{#if streetLine1}}{{ streetLine1 }}<br>{{/if}}
                    {{#if streetLine2}}{{ streetLine2 }}<br>{{/if}}
                    {{#if city}}{{ city }}{{/if}}{{#if province}}, {{ province }}{{/if}} {{#if postalCode}}{{ postalCode }}{{/if}}<br>
                    {{#if country}}{{ country }}{{/if}}
                    {{#if phoneNumber}}<br>{{ phoneNumber }}{{/if}}
                </div>
            {{/with}}
        </mj-text>
    </mj-column>
</mj-section>

<mj-section background-color="#fafafa" padding="30px 20px">
    <mj-column>
        <mj-text color="#333333" font-family="Inter, sans-serif" font-size="16px" line-height="1.6" align="center">
            Thank you for choosing Rotten Hand. We hope you love your new pieces!
        </mj-text>
        
        {{#if hasTracking}}
        <mj-text color="#666666" font-family="Inter, sans-serif" font-size="14px" line-height="1.6" align="center" padding="20px 0 0 0">
            <em>Please allow 24-48 hours for tracking information to become active.</em>
        </mj-text>
        {{else}}
        <mj-text color="#666666" font-family="Inter, sans-serif" font-size="14px" line-height="1.6" align="center" padding="20px 0 0 0">
            <em>You will receive tracking information separately once your package is processed by the carrier.</em>
        </mj-text>
        {{/if}}
    </mj-column>
</mj-section>

{{> footer }}
